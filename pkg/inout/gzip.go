package inout

import (
	"bytes"
	"compress/gzip"
	"fmt"
	"io/ioutil"
	"net/http"
)

//GzipMain method
func GzipMain() {

	var buf bytes.Buffer
	gz := gzip.NewWriter(&buf)
	_, err := gz.Write(payload)
	if err != nil {

		panic(err)
	}
	gz.Flush()
	gz.Close()

	client := &http.Client{}
	req, err := http.NewRequest("POST", "http://localhost:8080/save?bulk", &buf)
	if err != nil {
		panic(err)
	}
	req.Header.Set("Content-Type", "application/json")
	req.Header.Set("Content-Encoding", "gzip")
	req.Header.Set("x-tenant-id", "558e1c34-4108-476b-bd2d-76735deccaf1")
	req.Header.Set("x-roles", "api_sysanalytix_net_data_write")

	resp, err := client.Do(req)
	if err != nil {
		panic(err)
	}
	defer resp.Body.Close()
	bdy, err := ioutil.ReadAll(resp.Body)
	if err != nil {
		panic(err)
	}
	fmt.Println(string(bdy))
}

var payload = []byte(`{"events":[{"additionalInfo":{"fields.net.bytes_recv":76748,"fields.net.bytes_sent":34396,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":788,"fields.net.packets_sent":441,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"utun4"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":0,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"fw0"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":0,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"en5"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":16208,"fields.net.bytes_sent":16706,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":58,"fields.net.packets_sent":65,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"utun3"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":29192,"fields.net.bytes_sent":39946,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":118,"fields.net.packets_sent":142,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"utun2"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":8824,"fields.net.bytes_sent":11533,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":44,"fields.net.packets_sent":62,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"utun1"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":19484,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":102,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"utun0"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":0,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"en2"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":0,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"en1"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":2609968,"fields.net.bytes_sent":514421,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":12776,"fields.net.packets_sent":2137,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"awdl0"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":0,"fields.net.bytes_sent":0,"fields.net.drop_in":0,"fields.net.drop_out":0,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":0,"fields.net.packets_sent":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"p2p0"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.net.bytes_recv":3241905031,"fields.net.bytes_sent":452048152,"fields.net.drop_in":0,"fields.net.drop_out":5983,"fields.net.err_in":0,"fields.net.err_out":0,"fields.net.packets_recv":3720117,"fields.net.packets_sent":1993656,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal","tags.interface":"en0"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":96.20142446582531,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":2.0867174809446456,"fields.cpu.usage_user":1.7118580532300387,"tags.cpu":"cpu-total","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":99.6003996003996,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":0.1998001998001998,"fields.cpu.usage_user":0.1998001998001998,"tags.cpu":"cpu7","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":95.50449550449551,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":2.197802197802198,"fields.cpu.usage_user":2.2977022977022976,"tags.cpu":"cpu6","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":99.6,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":0.3,"fields.cpu.usage_user":0.1,"tags.cpu":"cpu5","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":93.9,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":3.1,"fields.cpu.usage_user":3,"tags.cpu":"cpu4","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":99.4005994005994,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":0.3996003996003996,"fields.cpu.usage_user":0.1998001998001998,"tags.cpu":"cpu3","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":92.2,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":4.1,"fields.cpu.usage_user":3.7,"tags.cpu":"cpu2","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":99.1991991991992,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":0.6006006006006006,"fields.cpu.usage_user":0.2002002002002002,"tags.cpu":"cpu1","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.mem.active":4045467648,"fields.mem.available":5149384704,"fields.mem.available_percent":29.973363876342773,"fields.mem.buffered":0,"fields.mem.cached":0,"fields.mem.commit_limit":0,"fields.mem.committed_as":0,"fields.mem.dirty":0,"fields.mem.free":1268649984,"fields.mem.high_free":0,"fields.mem.high_total":0,"fields.mem.huge_page_size":0,"fields.mem.huge_pages_free":0,"fields.mem.huge_pages_total":0,"fields.mem.inactive":3880734720,"fields.mem.low_free":0,"fields.mem.low_total":0,"fields.mem.mapped":0,"fields.mem.page_tables":0,"fields.mem.shared":0,"fields.mem.slab":0,"fields.mem.sreclaimable":0,"fields.mem.sunreclaim":0,"fields.mem.swap_cached":0,"fields.mem.swap_free":0,"fields.mem.swap_total":0,"fields.mem.total":17179869184,"fields.mem.used":12030484480,"fields.mem.used_percent":70.02663612365723,"fields.mem.vmalloc_chunk":0,"fields.mem.vmalloc_total":0,"fields.mem.vmalloc_used":0,"fields.mem.wired":2850529280,"fields.mem.write_back":0,"fields.mem.write_back_tmp":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.cpu.usage_guest":0,"fields.cpu.usage_guest_nice":0,"fields.cpu.usage_idle":90.3,"fields.cpu.usage_iowait":0,"fields.cpu.usage_irq":0,"fields.cpu.usage_nice":0,"fields.cpu.usage_softirq":0,"fields.cpu.usage_steal":0,"fields.cpu.usage_system":5.7,"fields.cpu.usage_user":4,"tags.cpu":"cpu0","tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.swap.in":0,"fields.swap.out":0,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190},{"additionalInfo":{"fields.swap.free":1263271936,"fields.swap.total":2147483648,"fields.swap.used":884211712,"fields.swap.used_percent":41.17431640625,"tags.host":"ip-192-168-1-153.eu-central-1.compute.internal"},"application":"messagebus","bundle":"datacenterone","elementID":"","externalID":"rack26","host":"ip-192-168-1-153.eu-central-1.compute.internal","localID":"aisletwo","status":"","statusTimestamp":1584232190}]}`)
